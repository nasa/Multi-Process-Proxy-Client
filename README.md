# proxy_client

The Multi-Process Proxy software allows cFS to run applications as separate OS processes on Linux platforms.
Using separate processes provides memory isolation, which prevents errors in cFS applications from propagating to other cFS applications or the core cFS services.

Multiple process support is implemented using a lightweight cFS application (the Proxy) and a Proxy Client library to provide access to cFS function calls to outside processes without requiring direct modifications to cFS.
The Proxy executes within the cFS memory space as a thread and provides a remote interface for calling cFS functions.
The Proxy Client library allows applications to access the Proxy interface from a different memory space/process as cFS.

In addition to the Proxy and Proxy Client, the following additional components are used:

* The Software Bus Network and Software Bus Network Client provide access to the cFS Software Bus
* Proxy EVS is a simple cFS application that allows the Proxy to send EVS messages before the application has registered with EVS
* cFS should be linked by the new application as a library to provide access to side-effect free functions

_this is not a cFS library; it is used by the process application_

_this is also the home of the interface definitions (see `flat_inc`, `wrap` and `interface`)_

This library is the "Proxy Client" and provides the process application access to the core cFS services (with exception of SB).
It communicates with the cFS application [Proxy](https://aetd-git.gsfc.nasa.gov/cFS_lab/proxy).

The process application should link the core of cFS as a library.
This allows function calls that are safe to call from the context of another process (such as SB_InitMsg) to be directly called.

Other functions, such as those that manipulate or depend on shared state, will have stubs available in this library.
These function calls are wrapped using the LD option `--wrap=symbol`.
This library handles serializing the function arguments and sending the data to the corresponding proxy application, which will make the function call on behalf of the process application.

## Configuration

Configuration is done via `proxy_client_defs.h`, which currently only has the address for the ipc pipe.
The address is relative to the applications launch directory, such as `cf/apps/`, and needs to match that used by the Proxy.

## Python Interface

The library produced (proxy_client.so) may be called by python applications through python's c interface.
See the files in `fsw/python_interface` for an example and `python_client.py`.

## Dependencies

Requires the NNG library (nng_lib).

Requires the FlatBuffers library (flat_lib).
The files in flat_inc are generated by flatcc from the files in the interface directory.

    ./bin/flatcc -a ../cfs_mps/apps/proxy_client/interface/cfs_* -o ./whut/
